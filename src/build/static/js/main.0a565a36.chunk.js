(this.webpackJsonpstorytime=this.webpackJsonpstorytime||[]).push([[0],{11:function(e,t,a){},39:function(e,t,a){e.exports=a(72)},45:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(33),o=a.n(n),r=(a(44),a(45),a(2)),c=a(3),i=a(1),m=a(5),h=a(4),d=(a(11),a(6));var u=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"addEntry",value:function(e){this.props.addEntry(e)}},{key:"render",value:function(){var e,t=this,a=this.props.book,s=a.title,n=a.author,o=a.pagesRead,r=a.pagesTotal,c=a.rating,i=a.numEntries;return l.a.createElement("div",{className:"col-md-4 mb-4"},l.a.createElement("div",{className:"card bg-dark"},l.a.createElement("div",{className:"th1 form-row align-items-center justify-content-center"},l.a.createElement("h4",{className:"text-center"},s)),l.a.createElement("div",{className:"form-row"},l.a.createElement("label",{className:"col-md-6 text-md-right"},"Author :"),l.a.createElement("label",{className:"col-md-6 text-md-center"},n)),l.a.createElement("div",{className:"form-row"},l.a.createElement("label",{className:"col-md-6 text-md-right"},"Pages Read:"),l.a.createElement("label",{className:"col-md-6"},o),l.a.createElement("label",{className:"col-md-6 text-md-right"},"Pages Total:"),l.a.createElement("label",{className:"col-md-6"},r)),l.a.createElement("div",{className:"form-row"},l.a.createElement("label",{className:"col-md-6 text-md-right"},"User Rating:"),l.a.createElement("label",{className:"col-md-6"},(e=c/i).toString().includes(".")?e.toFixed(1):e)),l.a.createElement("div",{className:"form-row"},l.a.createElement("div",{className:"col text-md-center font-weight-bold"},r>o&&o>r/2?l.a.createElement("label",{className:"text-info"},"Only ",r-o," pages left"):r>o?l.a.createElement("label",{className:"text-info"},r-o," pages left"):l.a.createElement("label",{className:"text-success"},"This book is complete!"))),l.a.createElement("div",{className:"form-group form-row mb-1"},l.a.createElement("div",{className:"offset-md-1 col-md-5"},l.a.createElement("button",{type:"submit",className:"btn buttonsecondary text-light btn-block d-block ml-auto",onClick:function(){t.props.switch("profile",t.props.book)}},"Profile")),l.a.createElement("div",{className:"offset-md-0 col-md-2"},l.a.createElement("button",{type:"button",className:"btn buttonsecondary text-light btn-block d-block ml-auto",onClick:function(){t.props.switch("entry",t.props.book)}},l.a.createElement(d.c,null))),l.a.createElement("div",{className:"offset-md-1 col-md-2"},l.a.createElement("button",{type:"button",className:"btn btn-danger btn-block d-block ml-auto",onClick:function(){t.props.removeBook(t.props.book)}},l.a.createElement(d.e,null))))))}}]),a}(s.Component),p=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"card bg-dark mb-5 mt-4"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",null,"Book Shelf")),this.props.bookshelf.length>0?l.a.createElement("div",{className:"container card-body"},l.a.createElement("div",{className:"row"},this.props.bookshelf.map((function(t,a){return l.a.createElement(u,{book:t,key:a,addEntry:e.props.addEntry,removeBook:e.props.removeBook,switch:e.props.switch})})))):l.a.createElement("h5",{className:"align-self-center p-4"},"You dont have any books on your shelf yet! Click Add New Book Entry to start your personal library!"))}}]),a}(s.Component),b=a(17),g=a(13),E=a.n(g);function f(e,t){e=e.toString(),t=t.toString();var a=e.slice(0,2),s=e.slice(3,5),l=t.slice(0,2),n=t.slice(3,5),o=parseInt(l)-parseInt(a);o<0&&(o=24+o);var r=parseInt(n)-parseInt(s);return r<0&&(r=60+r,o-=1),60*o+r}var v=a(10),k=a(8),N=a.n(k);function y(e){e.rgb={r:155*Math.random()+100,g:155*Math.random()+100,b:155*Math.random()+100},N.a.post("http://storytime-matt.herokuapp.com/home/public",e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}var w=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={showForm:!1,title:"",author:"",pagesRead:"",pagesTotal:"",bookNotes:"",sTime:"",eTime:"",rating:5,numEntries:1,errors:[],publicPost:!1},e.doChange=e.doChange.bind(Object(i.a)(e)),e.addBook=e.addBook.bind(Object(i.a)(e)),e.toggleCheckbox=e.toggleCheckbox.bind(Object(i.a)(e)),e}return Object(c.a)(a,[{key:"addBook",value:function(e){e.preventDefault();var t=E()().format("YYYY-MM-DD hh:mma").toString(),a=f(this.state.sTime,this.state.eTime),s={title:this.state.title,author:this.state.author,pagesRead:parseInt(this.state.pagesRead),pagesTotal:parseInt(this.state.pagesTotal),bookNotes:[{note:this.state.bookNotes,date:t,start:0,end:this.state.pagesRead,timeRead:a}],rating:parseInt(this.state.rating),numEntries:1,totTime:a},l=function(e,t,a){var s=[];""===e.title&&s.push("title field is required");""===e.author&&s.push("author field is required");""===e.pagesRead?s.push("Pages Read field is required"):isNaN(parseInt(e.pagesRead))&&s.push("Pages Read field must be a Number");""===e.pagesTotal?s.push("Pages Total field is required"):isNaN(parseInt(e.pagesTotal))&&s.push("Pages Total field must be a Number");""===t&&s.push("Start Time field is required");""===a&&s.push("End Time field is required");e.pagesRead>e.pagesTotal&&s.push("Cannot have read more pages than in the book total");var l=Object(v.isEmpty)(s);return{errors:s,isValid:l}}(s,this.state.sTime,this.state.eTime),n=l.errors;if(l.isValid){if(this.state.publicPost)y({title:this.state.title,author:this.state.author,note:this.state.bookNotes,start:0,end:parseInt(this.state.pagesRead),rating:parseInt(this.state.rating),nickname:this.props.nickname,dateOfPost:E()().format("YYYY-MM-DD hh:mma").toString()});this.props.addBook(s),this.setState({showForm:!1,title:"",author:"",pagesRead:"",pagesTotal:"",bookNotes:"",eTime:"",sTime:"",rating:5,errors:[],publicPost:!1}),document.getElementById("publicCheck").checked=!1}else this.setState({errors:n})}},{key:"doChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(b.a)({},s,a))}},{key:"toggleCheckbox",value:function(){this.setState({publicPost:!this.state.publicPost})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"card bg-dark mt-4"},l.a.createElement("div",{className:"card-header buttonsecondary",onClick:function(t){return e.setState({showForm:!e.state.showForm})}},l.a.createElement("h5",{className:"text-light"},"Add New Book ",l.a.createElement(d.c,null)," ")),l.a.createElement("div",{className:"card-body"+(this.state.showForm?"":" d-none")},l.a.createElement("form",{id:"aptForm",noValidate:!0,onSubmit:this.addBook},l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white-50 align-self-center"},"Book Title:"),l.a.createElement("input",{type:"text",className:"col-10 form-control",name:"title",placeholder:"Book Title",value:this.state.title,onChange:this.doChange})),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Author:"),l.a.createElement("input",{type:"text",className:"col-10 form-control",name:"author",placeholder:"Author Name",value:this.state.author,onChange:this.doChange})),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Start Time:"),l.a.createElement("input",{type:"time",className:"col-3 form-control",name:"sTime",value:this.state.sTime,onChange:this.doChange}),l.a.createElement("label",{className:"col-2 offset-2 text-white"},"End Time:"),l.a.createElement("input",{type:"time",className:"col-3 form-control",name:"eTime",value:this.state.eTime,onChange:this.doChange})),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Pages Read:"),l.a.createElement("input",{type:"text",className:"col-3 form-control",name:"pagesRead",placeholder:"Pages Read",value:this.state.pagesRead,onChange:this.doChange}),l.a.createElement("label",{className:"col-2 offset-2 text-white"},"Pages Total:"),l.a.createElement("input",{type:"text",className:"col-3 form-control",name:"pagesTotal",placeholder:"Pages Total",value:this.state.pagesTotal,onChange:this.doChange})),l.a.createElement("div",{className:"row py-2"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{className:"text-white"},"Rate what you read:")),[1,2,3,4,5,6,7,8,9,10].map((function(t,a){return l.a.createElement("span",{className:"col-1",key:a},l.a.createElement("button",{className:"btn buttonsecondary text-light btn-block d-block ml-auto rating",type:"button",onClick:function(a){return e.setState({rating:t})}},t))}))),l.a.createElement("div",{className:"row py-2"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{className:"text-white"},"Notes:")),l.a.createElement("div",{className:"col-10"},l.a.createElement("textarea",{className:"form-control",name:"bookNotes",placeholder:"This is the place to put any and all thoughts you have about what you just read. Favourite line? Worst character? Most shocking plot twist? Your notes will end up on the novels profile page!",cols:"60",rows:"3",value:this.state.bookNotes,onChange:this.doChange}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},this.state.errors.map((function(e,t){return l.a.createElement("div",{className:"form-row justify-content-center",key:t},l.a.createElement("label",{className:"text-danger text-center"},e))})),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("input",{className:"offset-8",type:"checkbox",id:"publicCheck",onChange:this.toggleCheckbox}),l.a.createElement("label",{className:"mx-2 my-2"},"Make Post Public"),l.a.createElement("button",{className:"btn btn-danger offset-1",type:"submit"},"Submit")))))))}}]),a}(s.Component),j=a(38);var S=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={pagesRead:"",rating:s.props.book.rating,note:"",startPage:s.props.book.pagesRead,sTime:"",eTime:"",errors:[],publicPost:!1},s.doChange=s.doChange.bind(Object(i.a)(s)),s.changeBookLog=s.changeBookLog.bind(Object(i.a)(s)),s.toggleCheckbox=s.toggleCheckbox.bind(Object(i.a)(s)),s}return Object(c.a)(a,[{key:"changeBookLog",value:function(e){e.preventDefault();var t=E()().format("YYYY-MM-DD hh:mma").toString(),a=f(this.state.sTime,this.state.eTime),s=Object(j.a)(this.props.book.bookNotes);s.unshift({note:this.state.bookNotes,date:t,start:this.state.startPage,end:parseInt(this.state.pagesRead)+parseInt(this.state.startPage),timeRead:a});var l={title:this.props.book.title,author:this.props.book.author,pagesRead:parseInt(this.props.book.pagesRead)+parseInt(this.state.pagesRead),pagesTotal:this.props.book.pagesTotal,bookNotes:s,numEntries:this.props.book.numEntries+1,rating:this.state.rating+this.props.book.rating,totTime:this.props.book.totTime+a},n=function(e,t,a){var s=[];""===e.pagesRead?s.push("Pages Read field is required"):isNaN(parseInt(e.pagesRead))&&s.push("Pages Read field must be a Number");""===t&&s.push("Start Time field is required");""===a&&s.push("End Time field is required");e.pagesRead>e.pagesTotal&&s.push("Cannot have read more pages than in the book total");var l=Object(v.isEmpty)(s);return{errors:s,isValid:l}}(l,this.state.sTime,this.state.eTime),o=n.errors;if(n.isValid){if(this.state.publicPost)y({title:this.props.book.title,author:this.props.book.author,note:this.state.bookNotes,start:this.state.startPage,end:parseInt(this.props.book.pagesRead)+parseInt(this.state.pagesRead),rating:parseInt(this.state.rating),nickname:this.props.nickname,dateOfPost:t});this.props.changeBookLog(this.props.book,l),this.setState({pagesRead:"",rating:"",bookNotes:"",startPage:"",sTime:"",eTime:""}),this.props.switch(),document.getElementById("publicCheck").checked=!1}else this.setState({errors:o})}},{key:"doChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(b.a)({},s,a))}},{key:"toggleCheckbox",value:function(){this.setState({publicPost:!this.state.publicPost})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"card bg-dark mt-4"},l.a.createElement("div",{className:"card-header buttonsecondary"},l.a.createElement("div",{className:"form-row"},l.a.createElement("h5",{className:"text-light col-11"},"Reading Entry for ",this.props.book.title," "),l.a.createElement("button",{className:"btn btn-danger col-1",onClick:function(){e.props.switch()}},l.a.createElement(d.d,null)))),l.a.createElement("div",{className:"card-body"},l.a.createElement("form",{id:"aptForm",noValidate:!0,onSubmit:this.changeBookLog},l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white-50 align-self-center"},"Book Title:"),l.a.createElement("label",null,l.a.createElement("b",null,this.props.book.title))),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Author:"),l.a.createElement("label",null,l.a.createElement("b",null,this.props.book.author))),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Start Time:"),l.a.createElement("input",{type:"time",className:"col-3 form-control",name:"sTime",value:this.state.sTime,onChange:this.doChange}),l.a.createElement("label",{className:"col-2 offset-2 text-white"},"End Time:"),l.a.createElement("input",{type:"time",className:"col-3 form-control",name:"eTime",value:this.state.eTime,onChange:this.doChange})),l.a.createElement("div",{className:"form-row py-2"},l.a.createElement("label",{className:"col-2 text-white"},"Pages Read:"),l.a.createElement("input",{type:"text",className:"col-3 form-control",name:"pagesRead",placeholder:"Pages Read",value:this.state.pagesRead,onChange:this.doChange}),l.a.createElement("label",{className:"col-2 offset-2 text-white"},"Pages Total:"),l.a.createElement("label",null,this.props.book.pagesTotal)),l.a.createElement("div",{className:"row py-2"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{className:"text-white"},"Rate what you read:")),[1,2,3,4,5,6,7,8,9,10].map((function(t,a){return l.a.createElement("span",{className:"col-1",key:a},l.a.createElement("button",{className:"btn buttonsecondary text-light btn-block d-block ml-auto rating",type:"button",onClick:function(a){return e.setState({rating:t})}},t))}))),l.a.createElement("div",{className:"row py-2"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{className:"text-white"},"Notes:")),l.a.createElement("div",{className:"col-10"},l.a.createElement("textarea",{className:"form-control",name:"bookNotes",placeholder:"This is the place to put any and all thoughts you have about what you just read. Favourite line? Worst character? Most shocking plot twist? Your notes will end up on the novels profile page!",cols:"60",rows:"3",value:this.state.bookNotes,onChange:this.doChange}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},this.state.errors.map((function(e,t){return l.a.createElement("div",{className:"row",key:t},l.a.createElement("label",{className:"text-danger"},e))})),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("input",{className:"offset-8",type:"checkbox",id:"publicCheck",onChange:this.toggleCheckbox}),l.a.createElement("label",{className:"mx-2 my-2"},"Make Post Public"),l.a.createElement("button",{className:"btn btn-danger offset-1",type:"submit"},"Submit")))))))}}]),a}(s.Component),C=a(34),P=a.n(C),O=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("div",{className:"row m-2"},l.a.createElement("div",{className:"col-11"},l.a.createElement("h3",{className:"text-center"},this.props.book.title," Profile Page")),l.a.createElement("div",{className:"col-1"},l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{className:"btn btn-danger",onClick:this.props.switch},l.a.createElement(d.d,null))))),l.a.createElement("br",null),this.props.book.bookNotes.map((function(t,a){return l.a.createElement("div",{className:"row",key:a},t.note?l.a.createElement("div",{className:"col m-3"},l.a.createElement("div",{className:"card bg-dark profile"},l.a.createElement("div",{className:"card-header"},l.a.createElement("label",null,"On",l.a.createElement("b",null,l.a.createElement(P.a,{date:t.date,parse:"YYYY-MM-DD hh:mma",format:"[ ]MMM. D, YYYY [at] h:mm A z[ ]"})),"you posted after reading ",l.a.createElement("b",null,t.end-t.start)," pages of ",l.a.createElement("b",null,e.props.book.title))),l.a.createElement("div",{className:"card-body profile_body"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"float-left mx-3"},t.note)),l.a.createElement("div",{className:"row mt-5"},l.a.createElement("div",{className:"col-4"},l.a.createElement("label",{className:""},"Read for ",l.a.createElement("b",null,t.timeRead)," ",1===t.timeRead?"minute":"minutes")),l.a.createElement("div",{className:"vl"}),l.a.createElement("div",{className:"col-4"},l.a.createElement("label",null,"From ",l.a.createElement("b",null,0===t.start?"The Beginning":"Page "+t.start))),l.a.createElement("div",{className:"vl"}),l.a.createElement("div",{className:"col-4 align-items-end"},l.a.createElement("label",null,"To ",l.a.createElement("b",null,"Page ",t.end))))))):"")})))}}]),a}(s.Component);function x(){document.getElementById("mySidebar").style.display="none"}var T=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("header",{className:"container text-dark"},l.a.createElement("div",{className:"row"},this.props.LogedIn?l.a.createElement("div",{className:"col-3"},l.a.createElement("button",{className:"navbutt mt-5 mx-3 btn btn-dark float-left",onClick:function(){document.getElementById("mySidebar").style.display="table-row"}},l.a.createElement(d.a,null)),l.a.createElement("ul",{id:"mySidebar",className:"navbar"},l.a.createElement("button",{onClick:function(){return x()},className:"mt-5 btn btn-dark"},l.a.createElement(d.a,null)),l.a.createElement("li",null,l.a.createElement("label",{onClick:function(){"Home"===e.props.pageName?x():e.props.newNavPage("Home")}}," Home ")),l.a.createElement("li",null,l.a.createElement("label",{onClick:function(){"Public"===e.props.pageName?x():e.props.newNavPage("Public")}}," Public ")))):"",l.a.createElement("div",{className:"col-6 py-3"+(this.props.LogedIn?"":" text-left")},l.a.createElement("h1",null,"StoryTime"),l.a.createElement("h5",null,"Read. Learn. Grow.")),this.props.LogedIn?l.a.createElement("div",{className:"col-3 pt-5"},l.a.createElement("div",{className:""},l.a.createElement("label",{className:"mx-2 font-weight-bold"},"Welcome ",this.props.nickname,"!"),l.a.createElement("button",{className:"btn btn-dark mx-2",onClick:this.props.Logout},"Logout"))):""))}}]),a}(s.Component),L=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={toggleMain:!0,pageId:s.props.pageId||"",newEntryBook:"",profileBook:"",toggleAdditional:!1,toggleProfile:!1,bookshelf:[],nickname:"",LogedIn:!1},s.addBook=s.addBook.bind(Object(i.a)(s)),s.changeBookLog=s.changeBookLog.bind(Object(i.a)(s)),s.removeBook=s.removeBook.bind(Object(i.a)(s)),s.postNewShelf=s.postNewShelf.bind(Object(i.a)(s)),s.switch=s.switch.bind(Object(i.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;""===this.state.pageId&&(window.location="/"),N.a.get("http://storytime-matt.herokuapp.com/home/".concat(this.state.pageId)).then((function(t){e.setState({bookshelf:t.data.Shelf,nickname:t.data.nickname})})).catch((function(e){console.log(e)})),this.setState({LogedIn:!0})}},{key:"addBook",value:function(e){var t=this.state.bookshelf;t.unshift(e),this.setState({bookshelf:t}),this.postNewShelf(t)}},{key:"changeBookLog",value:function(e,t){var a=this.state.bookshelf;(a=Object(v.without)(a,e)).unshift(t),this.setState({bookshelf:a}),this.postNewShelf(a)}},{key:"removeBook",value:function(e){var t=this.state.bookshelf;t=Object(v.without)(t,e),this.setState({bookshelf:t}),this.postNewShelf(t)}},{key:"switch",value:function(e,t){!1===this.state.toggleMain?this.setState({toggleMain:!0,toggleAdditional:!1,toggleProfile:!1}):"profile"===e?this.setState({toggleMain:!1,toggleProfile:!0,profileBook:t}):this.setState({toggleMain:!1,toggleAdditional:!0,newEntryBook:t})}},{key:"postNewShelf",value:function(e){N.a.put("http://storytime-matt.herokuapp.com/home/change/".concat(this.state.pageId),e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(T,{LogedIn:this.state.LogedIn,nickname:this.state.nickname,Logout:this.props.Logout,pageName:"Home",newNavPage:this.props.newNavPage}),l.a.createElement("main",{className:"bg-dark text-light base"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"container"},l.a.createElement("div",null,this.state.toggleAdditional?l.a.createElement(S,{book:this.state.newEntryBook,changeBookLog:this.changeBookLog,switch:this.switch,nickname:this.state.nickname}):""),l.a.createElement("h1",null,this.props.id),l.a.createElement("div",null,this.state.toggleProfile?l.a.createElement(O,{book:this.state.profileBook,switch:this.switch}):""),l.a.createElement("div",{className:this.state.toggleMain?"":"d-none"},l.a.createElement(w,{addBook:this.addBook,nickname:this.state.nickname}),l.a.createElement(p,{bookshelf:this.state.bookshelf,removeBook:this.removeBook,switch:this.switch}))))))))}}]),a}(s.Component),I=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={SEmail:"",SPassword:"",SNick:"",LEmail:"",LPassword:"",LogedIn:!1,errors:{}},s.submitNew=s.submitNew.bind(Object(i.a)(s)),s.submitLogin=s.submitLogin.bind(Object(i.a)(s)),s}return Object(c.a)(a,[{key:"submitNew",value:function(e){var t=this;e.preventDefault(),this.setState({errors:{}});var a={nickname:this.state.SNick,email:this.state.SEmail,password:this.state.SPassword};N.a.post("http://storytime-matt.herokuapp.com/home/signup",a).then((function(e){console.log(e.data),e.data.errors&&t.setState({errors:e.data.errors})})).catch((function(e){console.log(e)})),this.setState({SEmail:"",SPassword:"",SNick:""})}},{key:"submitLogin",value:function(e){var t=this;e.preventDefault(),this.setState({errors:{}});var a={email:this.state.LEmail,password:this.state.LPassword};N.a.post("http://storytime-matt.herokuapp.com/home/login",a).then((function(e){console.log(e.data),e.data.errors?t.setState({errors:e.data.errors}):t.props.setId(e.data.token)})).catch((function(e){console.log(e)})),this.setState({LEmail:"",LPassword:""})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(T,{LogedIn:this.state.LogedIn}),l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"login_line row"},l.a.createElement("div",{className:"offset-0 col-5"},l.a.createElement("h2",{className:"text-center"},"New User"),l.a.createElement("form",{onSubmit:function(t){return e.submitNew(t)}},l.a.createElement("div",{className:"row my-5"},l.a.createElement("label",{className:"col-4 justify-self-right"},"Email:"),l.a.createElement("br",null),l.a.createElement("input",{placeholder:"...",className:"col-6",value:this.state.SEmail,onChange:function(t){e.setState({SEmail:t.target.value})}})),l.a.createElement("div",{className:"row my-5"},l.a.createElement("label",{className:"col-4 justify-self-right"},"Password:"),l.a.createElement("br",null),l.a.createElement("input",{placeholder:"...",className:"col-6",value:this.state.SPassword,onChange:function(t){e.setState({SPassword:t.target.value})}})),l.a.createElement("div",{className:"row my-5"},l.a.createElement("label",{className:"col-4 justify-self-right"},"nickname:"),l.a.createElement("input",{placeholder:"What should we call you?",className:"col-6",value:this.state.SNick,onChange:function(t){e.setState({SNick:t.target.value})}})),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("button",{className:"btn btn-dark",type:"submit"},l.a.createElement("span",null,"Sign Up"))))),l.a.createElement("div",{className:"offset-2 col-5"},l.a.createElement("h2",{className:""},"Login"),l.a.createElement("form",{onSubmit:this.submitLogin},l.a.createElement("div",{className:"row my-5"},l.a.createElement("label",{className:"col-4 justify-self-right"},"Email:"),l.a.createElement("br",null),l.a.createElement("input",{placeholder:"...",className:"col-6",value:this.state.LEmail,onChange:function(t){e.setState({LEmail:t.target.value})}})),l.a.createElement("div",{className:"row my-5"},l.a.createElement("label",{className:"col-4 justify-self-right"},"Password:"),l.a.createElement("br",null),l.a.createElement("input",{placeholder:"...",className:"col-6",value:this.state.LPassword,onChange:function(t){e.setState({LPassword:t.target.value})}})),l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("button",{className:"btn btn-dark",type:"submit"},l.a.createElement("span",null,"Login")))))),l.a.createElement("div",{className:"my-3"},l.a.createElement("label",null,this.state.errors.email?this.state.errors.email:"")),l.a.createElement("div",null,l.a.createElement("label",null,this.state.errors.password?this.state.errors.password:"")),l.a.createElement("div",null,l.a.createElement("label",null,this.state.errors.nickname?this.state.errors.nickname:""))))}}]),a}(s.Component),B=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={nickname:"",pageId:s.props.pageId||"",LogedIn:!1,postLog:[]},s.onLike=s.onLike.bind(Object(i.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;""===this.state.pageId&&(window.location="/"),N.a.get("http://storytime-matt.herokuapp.com/home/".concat(this.state.pageId)).then((function(t){e.setState({nickname:t.data.nickname,LogedIn:!0})})).catch((function(e){console.log(e)})),N.a.get("http://storytime-matt.herokuapp.com/home/posts").then((function(t){e.setState({postLog:t.data.reverse()})}))}},{key:"removePost",value:function(e){console.log(e._id),N.a.post("http://storytime-matt.herokuapp.com/home/posts/delete/".concat(e._id)).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var t=Object(v.without)(this.state.postLog,e);this.setState({postLog:t})}},{key:"onLike",value:function(e){if(e.likes.includes(this.state.nickname)){var t=e.likes.indexOf(this.state.nickname);e.likes.splice(t,1)}else e.likes.push(this.state.nickname);console.log(e._id),N.a.put("http://storytime-matt.herokuapp.com/home/posts/update/likes/".concat(e._id),e.likes).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.forceUpdate()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(T,{LogedIn:this.state.LogedIn,nickname:this.state.nickname,Logout:this.props.Logout,pageName:"Public",newNavPage:this.props.newNavPage}),l.a.createElement("main",{className:"bg-dark base"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("h5",{className:"text-light my-3"},"Look around to see others thoughts about what they are reading but be weary of spoilers!"),this.state.postLog.map((function(t,a){return l.a.createElement("div",{className:"row",key:a},l.a.createElement("div",{className:"col-10 offset-1"},l.a.createElement("div",{className:"card bg-dark my-3"},l.a.createElement("div",{className:"card-header text-light"},l.a.createElement("label",{className:"float-left"},l.a.createElement("b",null,t.nickname)," posted after reading ",l.a.createElement("b",null,t.title)," by ",l.a.createElement("b",null,t.author)),l.a.createElement("h6",{className:"float-right"},t.dateOfPost)),l.a.createElement("div",{style:{background:"rgb(".concat(t.rgb.r,",").concat(t.rgb.g,",").concat(t.rgb.b,")")},className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"float-left text-dark"},t.note)),l.a.createElement("div",null,l.a.createElement("div",{className:"row mt-5"},l.a.createElement("div",{className:"col-3"},l.a.createElement("label",{className:""},"Rating: ",l.a.createElement("b",null,t.rating,"/10"))),l.a.createElement("div",{className:"vl"}),l.a.createElement("div",{className:"col-3"},l.a.createElement("label",null,"From page ",l.a.createElement("b",null,t.start))),l.a.createElement("div",{className:"vl"}),l.a.createElement("div",{className:"col-3"},l.a.createElement("label",null,"To page ",l.a.createElement("b",null,t.end))),l.a.createElement("div",{className:"vl"}),l.a.createElement("div",{className:"col-3"},l.a.createElement("label",null,"Likes: ",l.a.createElement("b",null,t.likes.length)))))))),l.a.createElement("div",{className:"col-1"},l.a.createElement("button",{className:"btn text-white my-4 "+(t.likes.includes(e.state.nickname)?"bg-dark":"buttonsecondary"),onClick:function(){e.onLike(t)}},l.a.createElement(d.b,null)),t.nickname===e.state.nickname?l.a.createElement("button",{className:"btn btn-danger mt-3 mb-2",onClick:function(){return e.removePost(t)}},l.a.createElement(d.e,null)):""))})))))))}}]),a}(s.Component),R=a(15),M=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).state={pageId:""},e.setId=e.setId.bind(Object(i.a)(e)),e}return Object(c.a)(a,[{key:"setId",value:function(e){this.setState({pageId:e}),Object(R.b)("/home")}},{key:"Logout",value:function(){Object(R.b)("/")}},{key:"newNavPage",value:function(e){"Home"===e?Object(R.b)("/home"):"Public"===e&&Object(R.b)("/public")}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(R.a,null,l.a.createElement(I,{path:"/",className:"",setId:this.setId}),l.a.createElement(L,{path:"/home",className:"",pageId:this.state.pageId,Logout:this.Logout,newNavPage:this.newNavPage}),l.a.createElement(B,{path:"/public",pageId:this.state.pageId,Logout:this.Logout,newNavPage:this.newNavPage})))}}]),a}(s.Component),Y=(a(31),a(68),a(37));o.a.render(l.a.createElement(Y.a,null,l.a.createElement(M,null)),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.0a565a36.chunk.js.map